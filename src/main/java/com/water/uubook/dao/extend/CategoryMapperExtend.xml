<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.water.uubook.dao.extend.CategoryMapperExtend">
    <!--扩展方法-->
    <select id="getAllCategory" resultType="com.water.uubook.model.dto.CategoryDto">
        SELECT * FROM (SELECT c.*,count(*) AS total FROM article a
	    LEFT JOIN category c ON a.category = c.id
	    GROUP BY category ORDER BY total desc) AS t
        UNION
        SELECT *,0 AS total FROM category  WHERE parent_id = 0
    </select>
</mapper>